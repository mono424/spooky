// This file is auto-generated. Do not edit manually.
// Generated by syncgen - any changes will be overwritten.

// To parse this JSON data, do
//
//     final schema = schemaFromJson(jsonString);

import 'dart:convert';

Schema schemaFromJson(String str) => Schema.fromJson(json.decode(str));

String schemaToJson(Schema data) => json.encode(data.toJson());

class Schema {
    Comment comment;
    CommentedOn commentedOn;
    Thread thread;
    User user;

    Schema({
        required this.comment,
        required this.commentedOn,
        required this.thread,
        required this.user,
    });

    factory Schema.fromJson(Map<String, dynamic> json) => Schema(
        comment: Comment.fromJson(json["comment"]),
        commentedOn: CommentedOn.fromJson(json["commented_on"]),
        thread: Thread.fromJson(json["thread"]),
        user: User.fromJson(json["user"]),
    );

    Map<String, dynamic> toJson() => {
        "comment": comment.toJson(),
        "commented_on": commentedOn.toJson(),
        "thread": thread.toJson(),
        "user": user.toJson(),
    };
}

class Comment {
    
    ///Record ID of table: user
    String author;
    
    ///Assert: $value != NONE AND string::len($value) > 0
    String content;
    DateTime? createdAt;
    
    ///Record ID
    String id;
    
    ///Record ID of table: thread
    String thread;

    Comment({
        required this.author,
        required this.content,
        this.createdAt,
        required this.id,
        required this.thread,
    });

    factory Comment.fromJson(Map<String, dynamic> json) => Comment(
        author: json["author"],
        content: json["content"],
        createdAt: json["created_at"] == null ? null : DateTime.parse(json["created_at"]),
        id: json["id"],
        thread: json["thread"],
    );

    Map<String, dynamic> toJson() => {
        "author": author,
        "content": content,
        "created_at": createdAt?.toIso8601String(),
        "id": id,
        "thread": thread,
    };
}

class CommentedOn {
    
    ///Record ID
    String id;

    CommentedOn({
        required this.id,
    });

    factory CommentedOn.fromJson(Map<String, dynamic> json) => CommentedOn(
        id: json["id"],
    );

    Map<String, dynamic> toJson() => {
        "id": id,
    };
}

class Thread {
    
    ///Record ID of table: user
    String author;
    
    ///Reverse relationship: array of comment records
    List<String>? comments;
    
    ///Assert: $value != NONE AND string::len($value) > 0
    String content;
    DateTime? createdAt;
    
    ///Record ID
    String id;
    
    ///Assert: $value != NONE AND string::len($value) > 0 AND string::len($value) <= 200
    String title;

    Thread({
        required this.author,
        this.comments,
        required this.content,
        this.createdAt,
        required this.id,
        required this.title,
    });

    factory Thread.fromJson(Map<String, dynamic> json) => Thread(
        author: json["author"],
        comments: json["comments"] == null ? [] : List<String>.from(json["comments"]!.map((x) => x)),
        content: json["content"],
        createdAt: json["created_at"] == null ? null : DateTime.parse(json["created_at"]),
        id: json["id"],
        title: json["title"],
    );

    Map<String, dynamic> toJson() => {
        "author": author,
        "comments": comments == null ? [] : List<dynamic>.from(comments!.map((x) => x)),
        "content": content,
        "created_at": createdAt?.toIso8601String(),
        "id": id,
        "title": title,
    };
}

class User {
    
    ///Reverse relationship: array of comment records
    List<String>? comments;
    
    ///Record ID
    String id;
    
    ///Reverse relationship: array of thread records
    List<String>? threads;
    
    ///Assert: $value != NONE AND string::len($value) > 3
    String username;

    User({
        this.comments,
        required this.id,
        this.threads,
        required this.username,
    });

    factory User.fromJson(Map<String, dynamic> json) => User(
        comments: json["comments"] == null ? [] : List<String>.from(json["comments"]!.map((x) => x)),
        id: json["id"],
        threads: json["threads"] == null ? [] : List<String>.from(json["threads"]!.map((x) => x)),
        username: json["username"],
    );

    Map<String, dynamic> toJson() => {
        "comments": comments == null ? [] : List<dynamic>.from(comments!.map((x) => x)),
        "id": id,
        "threads": threads == null ? [] : List<dynamic>.from(threads!.map((x) => x)),
        "username": username,
    };
}


/// The complete SurrealDB schema definition.
/// This constant contains the raw .surql schema file content.
const String SURQL_SCHEMA = "-- ##################################################################
-- SCOPES & AUTHENTICATION
-- ##################################################################

-- ##################################################################
-- USER TABLE
-- ##################################################################

DEFINE TABLE user SCHEMAFULL
PERMISSIONS FOR select, create, update, delete WHERE true;

DEFINE FIELD username ON TABLE user TYPE string
ASSERT \$value != NONE AND string::len(\$value) > 3
PERMISSIONS FOR select, create, update, delete WHERE true;
    
DEFINE INDEX unique_username ON TABLE user FIELDS username UNIQUE;



-- ##################################################################
-- THREAD TABLE
-- ##################################################################

DEFINE TABLE thread SCHEMAFULL
PERMISSIONS FOR select, create, update, delete WHERE true
;


DEFINE FIELD title ON TABLE thread TYPE string
    ASSERT \$value != NONE AND string::len(\$value) > 0 AND string::len(\$value) <= 200;

DEFINE FIELD content ON TABLE thread TYPE string
    ASSERT \$value != NONE AND string::len(\$value) > 0;

DEFINE FIELD author ON TABLE thread TYPE record<user>;

DEFINE FIELD created_at ON TABLE thread TYPE datetime
    VALUE time::now();

-- ##################################################################
-- COMMENT TABLE
-- ##################################################################

DEFINE TABLE comment SCHEMAFULL
PERMISSIONS FOR select, create, update, delete WHERE true
;

DEFINE FIELD thread ON TABLE comment TYPE record<thread>; -- @parent

DEFINE FIELD content ON TABLE comment TYPE string
    ASSERT \$value != NONE AND string::len(\$value) > 0;

DEFINE FIELD author ON TABLE comment TYPE record<user>;

DEFINE FIELD created_at ON TABLE comment TYPE datetime
    VALUE time::now();

-- ##################################################################
-- RELATION TABLES
-- ##################################################################

DEFINE TABLE commented_on SCHEMAFULL TYPE RELATION
  FROM comment TO thread
PERMISSIONS FOR select, create, update, delete WHERE true;

DEFINE EVENT comment_created ON TABLE comment WHEN \$event = \"CREATE\" THEN
  RELATE (\$after.id)->commented_on->(\$after.thread)
;";
