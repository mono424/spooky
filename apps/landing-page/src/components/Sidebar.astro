---
import { docsNav as nav } from '../config/nav';

const currentPath = Astro.url.pathname;
---

<nav class="space-y-6">
  {
    nav.map((group) => (
      <details open class="group">
        <summary class="flex items-center justify-between cursor-pointer list-none text-sm font-medium text-text-main mb-2 px-2 hover:opacity-80 select-none">
          {group.title}
          <svg
            class="w-4 h-4 transition-transform group-open:rotate-180 text-text-muted"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </summary>
        <ul class="space-y-0.5 relative border-l border-white/10 ml-2 pl-2">
          {group.links.map((link) => {
            const isActive =
              currentPath === link.href ||
              (link.href !== '/spooky/docs' && currentPath.startsWith(link.href));
            return (
              <li>
                <a
                  href={link.href}
                  class:list={[
                    'flex items-center gap-2 px-2 py-1.5 text-sm rounded-sm transition-colors border border-transparent',
                    isActive
                      ? 'text-white bg-white/5 font-medium border-white/10'
                      : 'text-zinc-500 hover:text-zinc-300 hover:bg-white/5',
                  ]}
                >
                  {isActive && <span class="w-1.5 h-1.5 bg-white rounded-full" />}
                  {link.text}
                </a>
              </li>
            );
          })}
        </ul>
      </details>
    ))
  }
</nav>

<style>
  /* Remove default details marker */
  details > summary {
    list-style: none;
  }
  details > summary::-webkit-details-marker {
    display: none;
  }
</style>
