---
layout: ../../layouts/DocsLayout.astro
title: Mutate Data
---

import CodeBlock from '../../components/ui/CodeBlock.astro';
import Warning from '../../components/ui/Warning.astro';

Mutating data in Spooky is performant and secure. Changes are instantly reflected in your local UI (optimistic updates) and synchronized with the server.

## Creating Records

To create a new record, use the `db.create` method. You need to specify the record ID (or let Spooky generate one) and the data.

<CodeBlock
  code={`import { Uuid } from 'surrealdb';

// Generate a unique ID
const genId = Uuid.v4().toString().replace(/-/g, '');
const threadId = \`thread:\${genId}\`;

// Create the record
await db.create(threadId, {
  title: 'My New Thread',
  content: 'This is the content of the thread.',
  author: 'user:current_user_id', // Record ID as string
  active: true,
});`}
  lang="typescript"
/>

<Warning>
  Ensure you adhere to the `PERMISSIONS` defined in your schema. If a user does not have permission
  to create a record, the operation will fail.
</Warning>

## Updating Records

Use `db.update()` to update existing records. This performs a partial update (merge) by default.

<CodeBlock
  code={`// Partial update
await db.update('thread', 'thread:123', {
  title: 'Updated Title'
});

// Update with debouncing (useful for real-time typing)
await db.update('thread', 'thread:123', {
  content: 'Updated content...'
}, {
  debounced: {
    key: 'recordId_x_fields',
    delay: 500
  }
});`}
  lang="typescript"
/>

## Deleting Records

To delete a record, call `db.delete` with the table name and record ID.

<CodeBlock 
  code={`await db.delete('thread', 'thread:123');`} 
  lang="typescript" 
/>
