---
layout: ../../layouts/DocsLayout.astro
title: Mutate Data
---

import CodeBlock from '../../components/ui/CodeBlock.astro';
import Warning from '../../components/ui/Warning.astro';

Mutating data in Spooky is performant and secure. Changes are instantly reflected in your local UI (optimistic updates) and synchronized with the server.

## Creating Records

To create a new record, use the `db.create` method. You need to specify the record ID (or let Spooky generate one) and the data.

<CodeBlock
  code={`import { Uuid } from '@spooky/client-solid';
import { RecordId } from 'surrealdb';

// Generate a unique ID
const genId = Uuid.v4().toString().replace(/-/g, '');
const threadId = \`thread:\${genId}\`;

// Create the record
await db.create(threadId, {
title: 'My New Thread',
content: 'This is the content of the thread.',
author: new RecordId('user', 'current_user_id'),
active: true,
created_at: new Date(),
});`}
lang="typescript"
/>

<Warning>
  Ensure you adhere to the `PERMISSIONS` defined in your schema. If a user does not have permission
  to create a record, the operation will fail.
</Warning>

## Updating Records

Updating is just as simple using `db.merge` (for partial updates) or `db.update` (for full replacement).

<CodeBlock
  code={`// Partial update (merge)
await db.merge('thread:123', {
  title: 'Updated Title'
});

// Full update (replace)
await db.update('thread:123', {
id: 'thread:123',
title: 'Updated Title',
content: 'New content...',
// ... must provide all required fields
});`}
lang="typescript"
/>

## Deleting Records

To delete a record, simply call `db.delete`.

<CodeBlock code={`await db.delete('thread:123');`} lang="typescript" />
